@use "../../helpers/" as *;

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(30px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes shimmer {
	0% {
		background-position: -1000px 0;
	}
	100% {
		background-position: 1000px 0;
	}
}

@keyframes modalFadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes modalSlideIn {
	from {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.9);
	}
	to {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}

.posts {
	display: flex;
	flex-direction: column;
	gap: rem(20);
	margin-top: rem(20);
	animation: fadeInUp 0.6s ease-out 0.3s backwards;

	&__addBtn {
		display: flex;
		justify-content: flex-start;
		animation: slideIn 0.5s ease-out;

		button {
			@include btn(transparent, var(--text-color), rem(14), rem(28));
			border-radius: rem(16);
			background: linear-gradient(135deg, #3b82f6, #8b5cf6);
			border: none;
			font-weight: 600;
			letter-spacing: rem(0.5);
			box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
			position: relative;
			overflow: hidden;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

			&::before {
				content: '';
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
				transition: left 0.5s;
			}

			&:hover {
				transform: translateY(-2px);
				box-shadow: 0 8px 24px rgba(59, 130, 246, 0.5);

				&::before {
					left: 100%;
				}
			}

			&:active {
				transform: translateY(0);
			}
		}
	}

	// Overlay стили
	&__modal-overlay {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-color: rgba(0, 0, 0, 0.75);
		backdrop-filter: blur(rem(8));
		z-index: 1000;
		display: flex;
		align-items: center;
		justify-content: center;
		animation: modalFadeIn 0.2s ease-out;

		&.ReactModal__Overlay--after-open {
			opacity: 1;
		}

		&.ReactModal__Overlay--before-close {
			opacity: 0;
		}
	}

	// Modal стили
	&__modal {
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background: linear-gradient(135deg, rgba(48, 54, 61, 0.95) 0%, rgba(30, 35, 40, 0.95) 100%);
		backdrop-filter: blur(rem(20));
		box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 rem(80) rgba(59, 130, 246, 0.2);
		padding: rem(32);
		border-radius: rem(24);
		border: 1px solid rgba(199, 199, 199, 0.1);
		max-width: rem(500);
		width: 90%;
		max-height: 90vh;
		overflow-y: auto;
		animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		outline: none;

		&.ReactModal__Content--after-open {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1);
		}

		&.ReactModal__Content--before-close {
			opacity: 0;
			transform: translate(-50%, -50%) scale(0.9);
		}
	}

	&__modal-close {
		position: absolute;
		top: rem(16);
		right: rem(16);
		background: rgba(255, 255, 255, 0.1);
		border: 1px solid rgba(199, 199, 199, 0.2);
		border-radius: rem(12);
		padding: rem(8) rem(16);
		color: var(--text-color);
		cursor: pointer;
		transition: all 0.3s ease;
		font-weight: 500;

		&:hover {
			background: rgba(255, 255, 255, 0.15);
			border-color: rgba(199, 199, 199, 0.3);
			transform: scale(1.05);
		}
	}

	&__modal form {
		margin-top: rem(40);
		display: flex;
		flex-direction: column;
		gap: rem(20);

		> div {
			display: flex;
			flex-direction: column;
			gap: rem(8);

			label {
				color: var(--text-color);
				font-weight: 600;
				font-size: rem(14);
				letter-spacing: rem(0.3);
				text-transform: uppercase;
			}

			input, textarea {
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(199, 199, 199, 0.2);
				border-radius: rem(12);
				padding: rem(12) rem(16);
				color: var(--text-color);
				font-size: rem(15);
				transition: all 0.3s ease;

				&:focus {
					outline: none;
					border-color: #3b82f6;
					background: rgba(255, 255, 255, 0.08);
					box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
				}

				&::placeholder {
					color: var(--second-text-color);
				}
			}

			input[type="file"] {
				padding: rem(10);
				cursor: pointer;

				&::file-selector-button {
					background: linear-gradient(135deg, #3b82f6, #8b5cf6);
					border: none;
					border-radius: rem(8);
					padding: rem(8) rem(16);
					color: white;
					font-weight: 600;
					cursor: pointer;
					margin-right: rem(12);
					transition: all 0.3s ease;

					&:hover {
						transform: translateY(-2px);
						box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
					}
				}
			}

			button[type="submit"] {
				@include btn(transparent, white, rem(14), rem(28));
				background: linear-gradient(135deg, #3b82f6, #8b5cf6);
				border: none;
				border-radius: rem(12);
				font-weight: 600;
				letter-spacing: rem(0.5);
				margin-top: rem(10);
				box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

				&:hover:not(:disabled) {
					transform: translateY(-2px);
					box-shadow: 0 8px 24px rgba(59, 130, 246, 0.5);
				}

				&:active:not(:disabled) {
					transform: translateY(0);
				}

				&:disabled {
					opacity: 0.6;
					cursor: not-allowed;
				}
			}
		}
	}

	&__list {
		display: grid;
		gap: rem(20);
		animation: fadeInUp 0.6s ease-out 0.4s backwards;
	}

	&__empty {
		text-align: center;
		color: var(--second-text-color);
		font-size: rem(18);
		margin-top: rem(60);
		padding: rem(40);
		background: rgba(255, 255, 255, 0.03);
		border-radius: rem(16);
		border: 1px dashed rgba(199, 199, 199, 0.2);
		animation: fadeInUp 0.6s ease-out;
	}
}

.post {
	background: linear-gradient(135deg, var(--background_light) 0%, rgba(48, 54, 61, 0.3) 100%);
	border-radius: rem(20);
	box-shadow: var(--boxShadow);
	padding: rem(24) rem(28);
	display: flex;
	flex-direction: column;
	gap: rem(14);
	border: 1px solid rgba(199, 199, 199, 0.1);
	transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
	overflow: hidden;
	animation: fadeInUp 0.5s ease-out backwards;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: rem(4);
		background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
		opacity: 0;
		transition: opacity 0.3s;
	}

	&:hover {
		box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
		transform: translateY(-4px) scale(1.01);
		border-color: rgba(199, 199, 199, 0.2);

		&::before {
			opacity: 1;
		}
	}

	@for $i from 1 through 10 {
		&:nth-child(#{$i}) {
			animation-delay: #{$i * 0.1}s;
		}
	}

	&__header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		gap: rem(12);
	}

	&__title {
		font-size: rem(22);
		font-weight: 700;
		color: var(--text-color);
		margin: 0;
		background: linear-gradient(135deg, #ffffff, #a0a0a0);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		flex: 1;
	}

	&__delete {
		background: rgba(239, 68, 68, 0.1);
		border: 1px solid rgba(239, 68, 68, 0.3);
		border-radius: rem(10);
		padding: rem(6) rem(12);
		color: #ef4444;
		cursor: pointer;
		transition: all 0.3s ease;
		font-size: rem(16);

		&:hover {
			background: rgba(239, 68, 68, 0.2);
			border-color: rgba(239, 68, 68, 0.5);
			transform: scale(1.1);
		}

		&:active {
			transform: scale(0.95);
		}
	}

	&__description {
		font-size: rem(16);
		color: var(--second-text-color);
		line-height: 1.6;
		word-break: break-word;
	}

	&__body {
		display: flex;
		gap: rem(40);
	}

	&__image {
		max-width: rem(100);
		max-height: rem(100);
		object-fit: cover;
		border-radius: rem(12);
		margin-top: rem(8);
		transition: transform 0.3s ease;
		display: block;

		&:hover {
			transform: scale(1.02);
		}
	}

	&__createdAt {
		font-size: rem(13);
		color: var(--second-text-color);
		align-self: flex-end;
		margin-top: rem(8);
		padding: rem(6) rem(12);
		background: rgba(255, 255, 255, 0.05);
		border-radius: rem(8);
		font-weight: 500;
	}
}

// Анимация для скелетона загрузки
.post-skeleton {
	background: linear-gradient(90deg, rgba(48, 54, 61, 0.3) 25%, rgba(48, 54, 61, 0.5) 50%, rgba(48, 54, 61, 0.3) 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
	border-radius: rem(20);
	height: rem(200);
}
